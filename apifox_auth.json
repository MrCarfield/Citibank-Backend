{
  "openapi": "3.1.0",
  "info": {
    "title": "Citibank Auth API",
    "description": "Authentication API subset for Apifox import",
    "version": "0.1.0"
  },
  "paths": {
    "/v1/auth/register": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "Register",
        "description": "用户注册",
        "operationId": "register_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegister"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserRegisterResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/challenge": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "Get Challenge",
        "description": "获取挑战 (Step 2)",
        "operationId": "get_challenge_v1_auth_challenge_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChallengeRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ChallengeResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/v1/auth/verify": {
      "post": {
        "tags": [
          "认证"
        ],
        "summary": "Verify Proof",
        "description": "验证证明 (Step 4)",
        "operationId": "verify_proof_v1_auth_verify_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/VerifyRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/VerifyResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ChallengeRequest": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "clientR": {
            "type": "string",
            "title": "Clientr"
          }
        },
        "type": "object",
        "required": [
          "username",
          "clientR"
        ],
        "title": "ChallengeRequest"
      },
      "ChallengeResponse": {
        "properties": {
          "challengeId": {
            "type": "string",
            "title": "Challengeid"
          },
          "c": {
            "type": "string",
            "title": "C"
          },
          "p": {
            "type": "string",
            "title": "P"
          },
          "q": {
            "type": "string",
            "title": "Q"
          },
          "g": {
            "type": "string",
            "title": "G"
          }
        },
        "type": "object",
        "required": [
          "challengeId",
          "c",
          "p",
          "q",
          "g"
        ],
        "title": "ChallengeResponse"
      },
      "ClientProfile": {
        "properties": {
          "clientId": {
            "type": "string",
            "title": "Clientid"
          },
          "name": {
            "type": "string",
            "title": "Name"
          },
          "type": {
            "$ref": "#/components/schemas/ClientType"
          },
          "currency": {
            "type": "string",
            "title": "Currency",
            "default": "USD"
          },
          "exposureDirection": {
            "$ref": "#/components/schemas/ExposureDirection"
          },
          "passThroughAbility": {
            "$ref": "#/components/schemas/PassThroughAbility"
          },
          "financialBuffer": {
            "$ref": "#/components/schemas/FinancialBuffer"
          },
          "volatilitySensitivity": {
            "$ref": "#/components/schemas/VolatilitySensitivity"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          }
        },
        "type": "object",
        "required": [
          "clientId",
          "name",
          "type",
          "exposureDirection",
          "passThroughAbility",
          "financialBuffer",
          "volatilitySensitivity"
        ],
        "title": "ClientProfile"
      },
      "ClientType": {
        "type": "string",
        "enum": [
          "UPSTREAM",
          "TRADER",
          "DOWNSTREAM"
        ],
        "title": "ClientType"
      },
      "Direction": {
        "type": "string",
        "enum": [
          "UP",
          "DOWN",
          "NEUTRAL",
          "MIXED",
          "UNCERTAIN"
        ],
        "title": "Direction"
      },
      "DriverCategory": {
        "type": "string",
        "enum": [
          "SUPPLY",
          "DEMAND",
          "MACRO_FINANCIAL",
          "FX",
          "EVENTS",
          "OTHER"
        ],
        "title": "DriverCategory"
      },
      "ExposureDirection": {
        "type": "string",
        "enum": [
          "BENEFITS_FROM_UP",
          "HURT_BY_UP",
          "MIXED"
        ],
        "title": "ExposureDirection"
      },
      "FactorContribution": {
        "properties": {
          "factorId": {
            "type": "string",
            "title": "Factorid"
          },
          "factorName": {
            "type": "string",
            "title": "Factorname"
          },
          "category": {
            "$ref": "#/components/schemas/DriverCategory"
          },
          "direction": {
            "$ref": "#/components/schemas/Direction"
          },
          "strength": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Strength"
          },
          "evidence": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Evidence"
          }
        },
        "type": "object",
        "required": [
          "factorId",
          "factorName",
          "category",
          "direction",
          "strength"
        ],
        "title": "FactorContribution"
      },
      "FinancialBuffer": {
        "type": "string",
        "enum": [
          "HIGH",
          "MEDIUM",
          "LOW"
        ],
        "title": "FinancialBuffer"
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "Horizon": {
        "type": "string",
        "enum": [
          "1w",
          "1m",
          "1q"
        ],
        "title": "Horizon"
      },
      "ImpactScore": {
        "properties": {
          "operatingStress": {
            "$ref": "#/components/schemas/StressLevel"
          },
          "fundingStress": {
            "$ref": "#/components/schemas/StressLevel"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence"
          }
        },
        "type": "object",
        "required": [
          "operatingStress",
          "fundingStress",
          "confidence"
        ],
        "title": "ImpactScore"
      },
      "Market": {
        "type": "string",
        "enum": [
          "WTI",
          "Brent"
        ],
        "title": "Market"
      },
      "PassThroughAbility": {
        "type": "string",
        "enum": [
          "STRONG",
          "MEDIUM",
          "WEAK"
        ],
        "title": "PassThroughAbility"
      },
      "ScenarioOverride": {
        "properties": {
          "priceShockPct": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Priceshockpct"
          },
          "volatilityShockPct": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Volatilityshockpct"
          },
          "eventTag": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Eventtag"
          }
        },
        "type": "object",
        "title": "ScenarioOverride"
      },
      "StressLevel": {
        "type": "string",
        "enum": [
          "LOW",
          "MEDIUM",
          "HIGH"
        ],
        "title": "StressLevel"
      },
      "TranslatorRequest": {
        "properties": {
          "clientId": {
            "type": "string",
            "title": "Clientid"
          },
          "market": {
            "$ref": "#/components/schemas/Market"
          },
          "horizon": {
            "$ref": "#/components/schemas/Horizon"
          },
          "asOf": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Asof"
          },
          "scenario": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ScenarioOverride"
              },
              {
                "type": "null"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "clientId",
          "market",
          "horizon"
        ],
        "title": "TranslatorRequest"
      },
      "TranslatorResponse": {
        "properties": {
          "client": {
            "$ref": "#/components/schemas/ClientProfile"
          },
          "market": {
            "$ref": "#/components/schemas/Market"
          },
          "horizon": {
            "$ref": "#/components/schemas/Horizon"
          },
          "asOf": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Asof"
          },
          "assumptions": {
            "anyOf": [
              {
                "items": {
                  "type": "string"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Assumptions"
          },
          "impactScore": {
            "$ref": "#/components/schemas/ImpactScore"
          },
          "keyDrivers": {
            "items": {
              "$ref": "#/components/schemas/FactorContribution"
            },
            "type": "array",
            "title": "Keydrivers"
          },
          "transmissionPath": {
            "items": {
              "$ref": "#/components/schemas/TransmissionStep"
            },
            "type": "array",
            "title": "Transmissionpath"
          },
          "rmTalkPoints": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Rmtalkpoints"
          },
          "bankActionChecklist": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Bankactionchecklist"
          }
        },
        "type": "object",
        "required": [
          "client",
          "market",
          "horizon",
          "impactScore",
          "keyDrivers",
          "transmissionPath",
          "rmTalkPoints",
          "bankActionChecklist"
        ],
        "title": "TranslatorResponse"
      },
      "TransmissionStep": {
        "properties": {
          "from": {
            "type": "string",
            "title": "From"
          },
          "to": {
            "type": "string",
            "title": "To"
          },
          "note": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Note"
          },
          "direction": {
            "$ref": "#/components/schemas/Direction"
          }
        },
        "type": "object",
        "required": [
          "from",
          "to",
          "direction"
        ],
        "title": "TransmissionStep"
      },
      "UserRegister": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "publicKeyY": {
            "type": "string",
            "title": "Publickeyy"
          },
          "salt": {
            "type": "string",
            "title": "Salt"
          }
        },
        "type": "object",
        "required": [
          "username",
          "publicKeyY",
          "salt"
        ],
        "title": "UserRegister"
      },
      "UserRegisterResponse": {
        "properties": {
          "username": {
            "type": "string",
            "title": "Username"
          },
          "message": {
            "type": "string",
            "title": "Message"
          }
        },
        "type": "object",
        "required": [
          "username",
          "message"
        ],
        "title": "UserRegisterResponse"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          },
          "input": {
            "title": "Input"
          },
          "ctx": {
            "type": "object",
            "title": "Context"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "VerifyRequest": {
        "properties": {
          "challengeId": {
            "type": "string",
            "title": "Challengeid"
          },
          "s": {
            "type": "string",
            "title": "S"
          },
          "clientR": {
            "type": "string",
            "title": "Clientr"
          },
          "username": {
            "type": "string",
            "title": "Username"
          }
        },
        "type": "object",
        "required": [
          "challengeId",
          "s",
          "clientR",
          "username"
        ],
        "title": "VerifyRequest"
      },
      "VerifyResponse": {
        "properties": {
          "token": {
            "type": "string",
            "title": "Token"
          },
          "type": {
            "type": "string",
            "title": "Type",
            "default": "Bearer"
          },
          "expiresIn": {
            "type": "integer",
            "title": "Expiresin"
          }
        },
        "type": "object",
        "required": [
          "token",
          "expiresIn"
        ],
        "title": "VerifyResponse"
      },
      "VolatilitySensitivity": {
        "type": "string",
        "enum": [
          "HIGH",
          "MEDIUM",
          "LOW"
        ],
        "title": "VolatilitySensitivity"
      }
    }
  }
}